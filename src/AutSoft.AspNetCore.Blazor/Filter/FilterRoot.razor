@using Microsoft.AspNetCore.Components.Forms
@using MudBlazor
@typeparam T
@inherits MudComponentBase
@inject Blazor.Localization.BlazorComponentLocalizer Localizer

<div class="@Classname">
    @if (FilterContent != null)
    {
        <MudExpansionPanels>
            <MudExpansionPanel>
                <TitleContent>
                    <div class="d-flex align-center gap-2">
                        <MudBadge Content="@_filterCount" Overlap="true" Bordered="true" Visible="@(_filterCount > 0)">
                            <MudIcon Icon="@Icons.Material.Filled.FilterAlt" />
                        </MudBadge>
                        <MudText Typo="Typo.h6">@Localizer.FilterRootHeaderTitle</MudText>
                    </div>
                </TitleContent>
                <ChildContent>
                    <MudForm Model="Model" @ref="Form" Class="d-flex flex-column flex-md-row gap-4">
                        <div Class="flex-grow-1 d-flex">
                            @FilterContent
                        </div>
                        <div class="d-flex flex-md-column justify-center flex-lg-row align-lg-center gap-4 gap-lg-8 ml-0 ml-md-4">
                            <MudButton Class="filter-button mr-md-0 ml-md-auto" Color="Color.Primary" Variant="Variant.Filled" OnClick="FilterAsync">
                                @Localizer.FilterRootRefreshButtonLabel
                            </MudButton>
                            <MudButton Class="filter-button mr-0 ml-auto ml-md-0" Color="Color.Secondary" Variant="Variant.Text" OnClick="ResetAsync" StartIcon="@Icons.Material.Filled.FilterAltOff">
                                @Localizer.FilterRootResetButtonLabel
                            </MudButton>
                        </div>
                    </MudForm>
                </ChildContent>
            </MudExpansionPanel>
        </MudExpansionPanels>
    }

    <div class="mt-4">
        @ChildContent
    </div>
</div>

